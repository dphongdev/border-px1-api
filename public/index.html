<!DOCTYPE html>
<html>

<head>
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, WLs-scalable=no" /> -->
    <title>LIGA's Whitelabel Management</title>
    <link rel="stylesheet" href="extjs/6.2/classic/theme-neptune/resources/theme-neptune-all.css" />
    <link rel="stylesheet" href="extjs/6.2/packages/ux/classic/neptune/resources/ux-all.css" />
    <!--<link rel="stylesheet" href="extjs/6.2/packages/charts/classic/neptune/resources/charts-all.css" />-->
    <!--<link rel="stylesheet" href="../stylesheets/font-awesome.min.css" />-->
    <script src="extjs/6.2/ext-all.js"></script>
    <!--<script src="extjs/6.2/packages/ux/classic/ux.js"></script>
    <script src="extjs/6.2/packages/charts/classic/charts.js"></script>-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsencrypt/2.3.1/jsencrypt.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.0.0/crypto-js.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.min.js"
        integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
    <link rel="shortcut icon"
        href="https://lh3.googleusercontent.com/a-/AOh14GjgiQ5JKAQrLioFlouEN-wAXCv_hU6jKIFU099p9w=s88-c-k-c0x00ffffff-no-rj-mo">
    <style>
        .spinner {
            width: 16px;
            height: 16px;
            border: 4px #ddd solid;
            border-top: 4px #2e93e6 solid;
            border-radius: 50%;
            animation: sp-anime 0.8s infinite linear;
        }

        @keyframes sp-anime {
            100% {
                transform: rotate(360deg);
            }
        }

        .openLink {
            background: url(https://icons.iconarchive.com/icons/icons8/windows-8/16/Programming-External-Link-icon.png) no-repeat center;
        }

        .remoteDesktop {
            background: url(https://icons.iconarchive.com/icons/tpdkdesign.net/refresh-cl/16/Network-Remote-Desktop-icon.png) no-repeat center;
        }

        .checkCls {
            background: url(https://icons.iconarchive.com/icons/custom-icon-design/pretty-office-2/16/FAQ-icon.png) no-repeat center;
        }

        .checkOkCls {
            background: url(img/checkok.png) no-repeat center;
        }

        .checkKoCls {
            background: url(img/checkko.png) no-repeat center;
        }

        .defaultDomainCls {
            background: url(https://icons.iconarchive.com/icons/google/noto-emoji-people-bodyparts/16/12003-OK-hand-light-skin-tone-icon.png) no-repeat center
        }

        .center {
            position: absolute;
            left: 50%;
            top: 10%;
            -webkit-transform: translate(-50%, -50%);
            transform: translate(-50%, -50%);
        }
    </style>
</head>

<body>
    <div id="app">
        <div id="center" class="center">
            <div id="loading" class="spinner"></div>
        </div>
    </div>
    <script>
        //var borderPx1ApiHost = !(window.location.host.indexOf('localhost') > -1) ? 'http://localhost:9999' : 'https://border-px1-api.herokuapp.com',
        let borderPx1ApiHost = 'http://localhost:9999',
            //let borderPx1ApiHost = 'https://border-px1-api.herokuapp.com',
            //let borderPx1ApiHost = 'https://border-px1-api.xyz',
            tokenPrivateKey = '-----BEGIN RSA PRIVATE KEY-----MIICXAIBAAKBgQCrRxLdvg03/1KX9xJAW0USP3pSqJTSkwEY3aQ2tphPkKmGAZxVPUgiNjyGxhplR6Q+YKKybmveL/TbhKEWCXRXcRkZVEQo3vG2SFozWcgJIFaCw7g6aU73hG3kYxb+uJsUPR7AUls/YECKeouCKEYgg+aqmJm0zgT+p3vBd/lNzwIDAQABAoGBAIQ04VguKg/uUjeg7AKnMMKsIuSI4g9Ej5U9CFN/UEQiOuiId77IBdT6nm+9nIRO73WCrDMkzrh7tfp3/st+0sCklR6IINTFH1+p9552qSDru6WpbIPsEK70yD6Cb8gfEC8PGQh1LRgzpLFMCGVcixuTRfbL3gXc2ZUmh+xmYMXBAkEA27ubu0MmMko3K/n02EU+Cij/fmlcnqkYblkDQxKJVQ3pmgVCmD4wfm2byT2TwbTPs+Rqp3nVnlR/RNJsDJESYQJBAMeMFTd6wOhB1d93HFxWgAYL/AA3B3znc5TxxxW7mn5v0c/uTR52UefoRfBDxxhqItCeTs+NsB5PIw3r6T95ri8CQHlr/4+IeLf7iOdVNba49KJ6q0y4fkTynhyENag/uwH0MS06UOV+ICANA7Q9wcOd3dTDmSg4zBG1Ear/OFPtaqECQC1gboayNGHcbr0lQd7BkNVPLlwCJ4LAwyjQnjwT8DrmRKjrAMB3mYKJ8DWFxCWKJSaZiURrbOxHhKoqxly31+MCQGDwutUtAE6q8E1hZ/+/tqr4fyG5vFW4EYXbeXcYPM6h+PoSBFSPaG/EAGfNmxPiFRll7ODBoHMHei/XXPlAHKg=-----END RSA PRIVATE KEY-----',
            log = console.log,
            loadScript = (pathScript) => {
                const script = document.createElement('script')
                script.src = borderPx1ApiHost + '/' + pathScript
                document.getElementsByTagName('head')[0].appendChild(script)
            },
            authenticate = (callback) => {
                Ext.Ajax.request({
                    method: 'GET',
                    withCredentials: true,
                    url: borderPx1ApiHost + '/user/login/status',
                    success: function (response) {
                        let success = JSON.parse(response.responseText).success
                        if (success)
                            //loadScript('js/whitelabelGrid.js?v=11')
                            callback(true)
                        else
                            //loadScript('js/loginForm.js?=2')
                            callback(false)
                    },
                    failure: function (response) {
                        Ext.Msg.alert(
                            'Error',
                            '/login/status'
                        );
                        callback(false)
                    },
                });
            }
        window.onload = () => {
            authenticate((isAuthenticated) => {
                if (isAuthenticated)
                    loadScript('js/whitelabelGrid.js?v=11')
                else
                    loadScript('js/loginForm.js?=2')
                Ext.tip.QuickTipManager.init();
            })
        }
    </script>
</body>

</html>
